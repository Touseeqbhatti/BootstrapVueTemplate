(self.webpackChunk=self.webpackChunk||[]).push([[188],{188:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(7757),r=n.n(a),s=n(9669),o=n.n(s);function c(e,t,n,a,r,s,o){try{var c=e[s](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function o(e){c(s,a,r,o,i,"next",e)}function i(e){c(s,a,r,o,i,"throw",e)}o(void 0)}))}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={name:"Shops",data:function(){return{mode:!1,sales:[],fields:[{key:"customer",sortable:!1},{key:"products",sortable:!1},{key:"total_amount",sortable:!1},{key:"paid_amount",sortable:!1},{key:"total_paid_amount",sortable:!1},{key:"discount",sortable:!1},{key:"paid",sortable:!1},{key:"created_at",sortable:!1},{key:"action",sortable:!1}],currentPage:1,rows:null,perPage:20,keyword:null,timer:0}},created:function(){this.getData()},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,n(629).Se)(["locale"])),methods:{getData:function(){var e=this;return i(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e.keyword&&(e.currentPage=1),clearTimeout(e.timer),e.timer=setTimeout(i(r().mark((function t(){var n,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={perPage:e.perPage,currentPage:e.currentPage,keyword:e.keyword},t.next=3,o().get("/sales",{params:n});case 3:a=t.sent,s=a.data,e.sales=s.data,e.rows=s.total;case 7:case"end":return t.stop()}}),t)}))),400);case 3:case"end":return t.stop()}}),t)})))()},saleReport:function(e){var t=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$bvModal.msgBoxConfirm(t.$t("make_bill_confirmation_text"),{title:t.$t("confirmation"),size:"md",buttonSize:"sm",okVariant:"danger",cancelVariant:"success",okTitle:t.$t("yes"),cancelTitle:t.$t("no"),footerClass:"p-2",hideHeaderClose:!0,centered:!0,noCloseOnBackdrop:!0}).then(function(){var t=i(r().mark((function t(n){var a,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}return t.next=3,o().get("/sales/".concat(e,"/report"),{responseType:"arraybuffer"});case 3:a=t.sent,s=window.URL.createObjectURL(new Blob([a.data],{type:"application/pdf"})),(c=document.createElement("a")).href=s,c.target="_blank",document.body.appendChild(c),c.click();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 1:case"end":return n.stop()}}),n)})))()},deleteRow:function(e){var t=this;return i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$bvModal.msgBoxConfirm(t.$t("delete_confirmation_text"),{title:t.$t("confirmation"),size:"md",buttonSize:"sm",okVariant:"danger",cancelVariant:"success",okTitle:t.$t("yes"),cancelTitle:t.$t("no"),footerClass:"p-2",hideHeaderClose:!0,centered:!0,noCloseOnBackdrop:!0}).then(function(){var n=i(r().mark((function n(a){var s,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=6;break}return n.next=3,o().delete("/sales/".concat(e));case 3:s=n.sent,(c=s.data).status?(t.$toastr.s("SUCCESS",c.message),t.getData()):t.$toastr.e("Error",c.message);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 1:case"end":return n.stop()}}),n)})))()}}};const f=(0,n(1900).Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card shadow mb-4"},[n("div",{staticClass:"card-header py-3"},[n("div",{staticClass:"d-flex align-items-center justify-content-between"},[n("h6",{staticClass:"m-0 font-weight-bold text-primary"},[e._v("\n                    "+e._s(e.$t("sales"))+"\n                ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-primary text-nowrap",on:{click:function(t){return e.$router.push({name:"sales.create"})}}},[e._v("\n                    "+e._s(e.$t("add_sale"))+"\n                ")])])]),e._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row d-flex justify-content-between align-items-center"},[n("div",{staticClass:"col-md-4 col-lg-3 col-12 mb-2 d-flex",staticStyle:{"column-gap":"1rem"}},[n("b-form-select",{attrs:{options:[5,10,15,20]},on:{change:e.getData},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e._v(" "),n("div",{staticClass:"col-md-4 col-lg-3 col-12 mb-2"},[n("div",{staticClass:"iq-search-bar d-none d-md-block"},[n("form",{staticClass:"searchbox",attrs:{action:"#"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"form-control",staticStyle:{cursor:"pointer"},attrs:{type:"text",placeholder:e.$t("search")},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.getData]}})])])])]),e._v(" "),n("b-table",{attrs:{items:e.sales,fields:e.fields,responsive:""},scopedSlots:e._u([{key:"head()",fn:function(t){return[e._v("\n                    "+e._s(e.$t(t.column))+"\n                ")]}},{key:"cell(customer)",fn:function(t){return[e._v("\n                    "+e._s(t.value.name)+"\n                ")]}},{key:"cell(products)",fn:function(t){return[e._v("\n                    "+e._s(t.value.length)+"\n                ")]}},{key:"cell(paid)",fn:function(t){return[e._v("\n                    "+e._s(t.value?"Yes":"No")+"\n                ")]}},{key:"cell(action)",fn:function(t){return[n("button",{staticClass:"btn btn-sm btn-success text-nowrap",on:{click:function(n){return e.saleReport(t.item.id)}}},[e._v("\n                        "+e._s(e.$t("make_bill"))+"\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-warning text-nowrap",on:{click:function(n){return e.$router.push({name:"sales.edit",params:{saleId:t.item.id}})}}},[e._v("\n                        "+e._s(e.$t("show"))+"\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-danger text-nowrap",on:{click:function(n){return e.deleteRow(t.item.id)}}},[e._v("\n                        "+e._s(e.$t("delete"))+"\n                    ")])]}}])}),e._v(" "),0===e.sales.length?n("div",{staticClass:"alert alert-info text-center"},[e._v("\n                "+e._s(e.$t("no_record_found"))+"\n            ")]):e._e(),e._v(" "),n("div",{staticClass:"d-flex justify-content-end mt-4 pb-3"},[n("b-pagination",{attrs:{pills:"",size:"md","total-rows":e.rows,"per-page":e.perPage,"aria-controls":"my-table"},on:{input:e.getData},scopedSlots:e._u([{key:"first-text",fn:function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"en"==e.locale,expression:"locale == 'en'"}]},[n("i",{staticClass:"fa-solid fa-angles-left"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"ur"==e.locale,expression:"locale == 'ur'"}]},[n("i",{staticClass:"fa-solid fa-angles-right"})])]},proxy:!0},{key:"prev-text",fn:function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"en"==e.locale,expression:"locale == 'en'"}]},[n("i",{staticClass:"fa-solid fa-angle-left"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"ur"==e.locale,expression:"locale == 'ur'"}]},[n("i",{staticClass:"fa-solid fa-angle-right"})])]},proxy:!0},{key:"next-text",fn:function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"en"==e.locale,expression:"locale == 'en'"}]},[n("i",{staticClass:"fa-solid fa-angle-right"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"ur"==e.locale,expression:"locale == 'ur'"}]},[n("i",{staticClass:"fa-solid fa-angle-left"})])]},proxy:!0},{key:"last-text",fn:function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"en"==e.locale,expression:"locale == 'en'"}]},[n("i",{staticClass:"fa-solid fa-angles-right"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"ur"==e.locale,expression:"locale == 'ur'"}]},[n("i",{staticClass:"fa-solid fa-angles-left"})])]},proxy:!0}]),model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)])])}),[],!1,null,null,null).exports}}]);